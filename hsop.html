<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KEDCO - CTO Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        :root {
            --kedco-primary: #0055A5;
            --kedco-secondary: #00A651;
            --kedco-accent: #FFC72C;
            --kedco-dark: #003366;
            --kedco-light: #E6F0FF;
            --kedco-danger: #E74C3C;
            --kedco-warning: #F39C12;
            --kedco-success: #2ECC71;
            --text: #333;
            --text-light: #fff;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: var(--text);
            display: flex;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Sidebar Styles */
        .sidebar {
            width: 280px;
            background: var(--kedco-primary);
            color: var(--text-light);
            transition: var(--transition);
            height: 100vh;
            position: fixed;
            overflow-y: auto;
            z-index: 1000;
        }

        .sidebar-header {
            padding: 20px;
            background: var(--kedco-dark);
            display: flex;
            align-items: center;
            border-bottom: 2px solid var(--kedco-accent);
        }

        .sidebar-header img {
            width: 45px;
            height: 45px;
            margin-right: 12px;
            object-fit: contain;
        }

        .sidebar-header h1 {
            font-size: 20px;
            font-weight: 600;
        }

        .sidebar-menu {
            padding: 15px 0;
        }

        .sidebar-menu ul {
            list-style: none;
        }

        .sidebar-menu li {
            margin-bottom: 5px;
        }

        .sidebar-menu a {
            color: var(--text-light);
            text-decoration: none;
            display: flex;
            align-items: center;
            padding: 14px 20px;
            transition: var(--transition);
            position: relative;
        }

        .sidebar-menu a:hover, .sidebar-menu a.active {
            background: rgba(255, 255, 255, 0.1);
            border-left: 4px solid var(--kedco-accent);
        }

        .sidebar-menu a.active::after {
            content: '';
            position: absolute;
            right: 15px;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--kedco-accent);
            box-shadow: 0 0 8px var(--kedco-accent);
        }

        .sidebar-menu i {
            margin-right: 12px;
            font-size: 18px;
            width: 24px;
            text-align: center;
        }

        .sidebar-menu .badge {
            margin-left: auto;
            background: var(--kedco-accent);
            color: var(--kedco-dark);
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 20px;
            transition: var(--transition);
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding: 15px 20px;
            background: white;
            border-radius: 10px;
            box-shadow: var(--card-shadow);
        }

        .header-title h1 {
            font-size: 24px;
            color: var(--kedco-primary);
            display: flex;
            align-items: center;
        }

        .header-title h1 i {
            margin-right: 10px;
            color: var(--kedco-secondary);
        }

        .header-title p {
            color: #7f8c8d;
            font-size: 14px;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .search-box {
            position: relative;
        }

        .search-box input {
            padding: 10px 15px 10px 40px;
            border: 1px solid #ddd;
            border-radius: 6px;
            width: 250px;
            font-size: 14px;
            transition: var(--transition);
        }

        .search-box input:focus {
            border-color: var(--kedco-secondary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 166, 81, 0.1);
        }

        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #95a5a6;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 15px;
            background: var(--kedco-light);
            border-radius: 6px;
            cursor: pointer;
            transition: var(--transition);
        }

        .user-profile:hover {
            background: #d9e6ff;
        }

        .user-profile img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--kedco-secondary);
        }

        .user-profile .user-info {
            line-height: 1.3;
        }

        .user-profile .user-info .name {
            font-weight: 600;
            color: var(--kedco-primary);
        }

        .user-profile .user-info .role {
            font-size: 12px;
            color: var(--kedco-secondary);
        }

        /* Alert Banner */
        .alert-banner {
            background: linear-gradient(90deg, #ffc72c 0%, #ffdd78 100%);
            color: #7a6000;
            padding: 12px 20px;
            border-radius: 8px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            box-shadow: var(--card-shadow);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 199, 44, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(255, 199, 44, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 199, 44, 0); }
        }

        .alert-banner i {
            margin-right: 12px;
            font-size: 20px;
        }

        .alert-banner .content {
            flex: 1;
        }

        .alert-banner .close {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: #7a6000;
        }

        /* Dashboard Metrics */
        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .metric-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: var(--card-shadow);
            display: flex;
            align-items: center;
            transition: var(--transition);
            border-left: 4px solid var(--kedco-primary);
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
        }

        .metric-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 24px;
            color: white;
            background: linear-gradient(135deg, var(--kedco-primary) 0%, var(--kedco-dark) 100%);
        }

        .metric-info h3 {
            font-size: 24px;
            margin-bottom: 5px;
            color: var(--kedco-primary);
        }

        .metric-info p {
            color: #7f8c8d;
            font-size: 14px;
        }

        .metric-trend {
            margin-left: auto;
            font-size: 14px;
            font-weight: 600;
            padding: 4px 8px;
            border-radius: 4px;
        }

        .trend-up {
            color: var(--kedco-success);
            background: rgba(46, 204, 113, 0.1);
        }

        .trend-down {
            color: var(--kedco-danger);
            background: rgba(231, 76, 60, 0.1);
        }

        /* Unit Cards */
        .unit-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .unit-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
        }

        .unit-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
        }

        .unit-header {
            padding: 15px 20px;
            color: white;
            display: flex;
            align-items: center;
            background: linear-gradient(90deg, var(--kedco-primary) 0%, var(--kedco-secondary) 100%);
        }

        .unit-header i {
            margin-right: 10px;
            font-size: 20px;
        }

        .unit-body {
            padding: 20px;
        }

        .unit-metric {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid #f0f0f0;
        }

        .unit-metric:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .unit-metric label {
            color: #7f8c8d;
            font-size: 14px;
        }

        .unit-metric span {
            font-weight: 600;
            color: var(--kedco-primary);
        }

        .progress-bar {
            height: 8px;
            background: #eee;
            border-radius: 4px;
            margin-top: 5px;
            overflow: hidden;
        }

        .progress-value {
            height: 100%;
            border-radius: 4px;
        }

        /* Widgets */
        .widgets {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .widget {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: var(--card-shadow);
        }

        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .widget-header h2 {
            font-size: 18px;
            color: var(--kedco-primary);
            display: flex;
            align-items: center;
        }

        .widget-header h2 i {
            margin-right: 8px;
            color: var(--kedco-secondary);
        }

        .widget-actions {
            display: flex;
        }

        .widget-actions button {
            background: none;
            border: none;
            cursor: pointer;
            color: #95a5a6;
            margin-left: 10px;
            font-size: 16px;
            transition: var(--transition);
        }

        .widget-actions button:hover {
            color: var(--kedco-primary);
        }

        /* Map Widget */
        #outageMap {
            height: 300px;
            border-radius: 8px;
            overflow: hidden;
            margin-top: 10px;
        }

        /* Request Tables */
        .request-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            font-size: 14px;
        }

        .request-table th, .request-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .request-table th {
            background-color: #f8f9fa;
            color: var(--kedco-primary);
            font-weight: 600;
        }

        .request-table tr:hover {
            background-color: #f8f9fa;
        }

        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }

        .status-approved {
            background-color: #d4edda;
            color: #155724;
        }

        .status-rejected {
            background-color: #f8d7da;
            color: #721c24;
        }

        .status-in-progress {
            background-color: #cce5ff;
            color: #004085;
        }

        .status-completed {
            background-color: #d4edda;
            color: #155724;
        }

        /* Unit Views */
        .unit-view {
            display: none;
        }

        .unit-view.active {
            display: block;
        }

        /* Live Data Indicators */
        .live-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--kedco-success);
            margin-right: 8px;
            animation: pulse 2s infinite;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .sidebar {
                width: 80px;
            }
            .sidebar-header span, .sidebar-menu a span, .sidebar-menu .badge {
                display: none;
            }
            .sidebar-menu a {
                justify-content: center;
                padding: 15px;
            }
            .sidebar-menu i {
                margin-right: 0;
            }
            .main-content {
                margin-left: 80px;
            }
        }

        @media (max-width: 992px) {
            .widgets {
                grid-template-columns: 1fr;
            }
            #outageMap {
                height: 250px;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 0;
            }
            .sidebar.active {
                width: 280px;
            }
            .sidebar.active .sidebar-header span,
            .sidebar.active .sidebar-menu a span,
            .sidebar.active .sidebar-menu .badge {
                display: inline;
            }
            .sidebar.active .sidebar-menu a {
                justify-content: flex-start;
                padding: 14px 20px;
            }
            .sidebar.active .sidebar-menu i {
                margin-right: 12px;
            }
            .main-content {
                margin-left: 0;
            }
            .menu-toggle {
                display: block !important;
            }
            .search-box input {
                width: 180px;
            }
            .unit-cards {
                grid-template-columns: 1fr;
            }
        }

        .menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--kedco-primary);
            margin-right: 15px;
        }

        /* KEDCO Branding */
        .kedco-badge {
            background: linear-gradient(90deg, var(--kedco-primary) 0%, var(--kedco-secondary) 100%);
            color: white;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }

        /* Alert Toast */
        .alert-toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            border-left: 4px solid var(--kedco-danger);
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            z-index: 1000;
            animation: slideIn 0.5s forwards;
            max-width: 350px;
        }

        @keyframes slideIn {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .alert-toast i {
            color: var(--kedco-danger);
            font-size: 20px;
            margin-right: 12px;
        }

        .alert-toast .content {
            flex: 1;
        }

        .alert-toast .content h4 {
            color: var(--kedco-danger);
            margin-bottom: 4px;
        }

        .alert-toast .content p {
            font-size: 14px;
            color: #666;
        }

        .alert-toast .close {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: #95a5a6;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <img src="https://cdn-icons-png.flaticon.com/512/2455/2455238.png" alt="KEDCO Logo">
            <h1>KEDCO <span>CTO</span></h1>
        </div>
        <nav class="sidebar-menu">
            <ul>
                <li><a href="#" class="active" data-view="overview"><i class="fas fa-home"></i> <span>Dashboard Overview</span></a></li>
                <li><a href="#" data-view="om-unit"><i class="fas fa-bolt"></i> <span>O&M Unit</span> <span class="badge">3</span></a></li>
                <li><a href="#" data-view="pcm-unit"><i class="fas fa-shield-alt"></i> <span>PC&M Unit</span> <span class="badge">1</span></a></li>
                <li><a href="#" data-view="planning-unit"><i class="fas fa-project-diagram"></i> <span>Planning & Projects</span> <span class="badge">5</span></a></li>
                <li><a href="#" data-view="hse-unit"><i class="fas fa-hard-hat"></i> <span>HSE Unit</span> <span class="badge">2</span></a></li>
                <li><a href="#" data-view="system-unit"><i class="fas fa-network-wired"></i> <span>System Operation</span></a></li>
                <li><a href="#" data-view="analytics"><i class="fas fa-chart-line"></i> <span>Performance Analytics</span></a></li>
                <li><a href="#" data-view="outage-map"><i class="fas fa-map-marked-alt"></i> <span>Outage Map</span></a></li>
                <li><a href="#" data-view="settings"><i class="fas fa-cog"></i> <span>Settings</span></a></li>
                <li><a href="#" onclick="logout(); return false;"><i class="fas fa-sign-out-alt"></i> <span class="menu-text">Logout</span></a></li>
            </ul>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Header -->
        <div class="header">
            <div class="header-title">
                <h1><i class="fas fa-sliders-h"></i> <span id="page-title">Technical Operations Dashboard</span></h1>
                <p id="page-description">Real-time monitoring of Kano Electricity Distribution Company network performance</p>
            </div>
            <div class="header-actions">
                <button class="menu-toggle" id="menuToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search feeders, transformers...">
                </div>
                <div class="user-profile">
                    <img src="https://randomuser.me/api/portraits/men/75.jpg" alt="User">
                    <div class="user-info">
                        <div class="name">Dr. Abdullahi Bello</div>
                        <div class="role">Chief Technical Officer</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Alert Banner -->
        <div class="alert-banner">
            <i class="fas fa-exclamation-triangle"></i>
            <div class="content">
                <strong>Grid Alert:</strong> Partial outage reported in Tarauni FEEDER_11KV_402 - Crew dispatched
            </div>
            <button class="close">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <!-- Overview Dashboard -->
        <div id="overview" class="unit-view active">
            <!-- Metrics -->
            <div class="metrics">
                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <div class="metric-info">
                        <h3>5.2%</h3>
                        <p>System Average Interruption Duration Index (SAIDI)</p>
                    </div>
                    <div class="metric-trend trend-down">
                        <i class="fas fa-arrow-down"></i> 1.2%
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-plug"></i>
                    </div>
                    <div class="metric-info">
                        <h3>3.8</h3>
                        <p>System Average Interruption Frequency Index (SAIFI)</p>
                    </div>
                    <div class="metric-trend trend-up">
                        <i class="fas fa-arrow-up"></i> 0.4
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="metric-info">
                        <h3>18.6%</h3>
                        <p>Energy Loss Rate</p>
                    </div>
                    <div class="metric-trend trend-down">
                        <i class="fas fa-arrow-down"></i> 2.3%
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-tachometer-alt"></i>
                    </div>
                    <div class="metric-info">
                        <h3>94.7%</h3>
                        <p>Transformer Load Capacity</p>
                    </div>
                    <div class="metric-trend trend-up">
                        <i class="fas fa-arrow-up"></i> 1.5%
                    </div>
                </div>
            </div>

            <!-- Unit Cards -->
            <div class="unit-cards">
                <!-- O&M Unit Card -->
                <div class="unit-card">
                    <div class="unit-header">
                        <i class="fas fa-bolt"></i>
                        <h3>Operation & Maintenance</h3>
                    </div>
                    <div class="unit-body">
                        <div class="unit-metric">
                            <label>Feeders Operational</label>
                            <span>128/142</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-value" style="width: 90%; background-color: var(--kedco-primary);"></div>
                        </div>
                        
                        <div class="unit-metric">
                            <label>Maintenance Tasks</label>
                            <span>42/58</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-value" style="width: 72%; background-color: var(--kedco-primary);"></div>
                        </div>
                        
                        <div class="unit-metric">
                            <label>Fault Resolution Rate</label>
                            <span>94%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-value" style="width: 94%; background-color: var(--kedco-primary);"></div>
                        </div>
                    </div>
                </div>

                <!-- System Operation Card -->
                <div class="unit-card">
                    <div class="unit-header">
                        <i class="fas fa-network-wired"></i>
                        <h3>System Operation / Dispatch</h3>
                    </div>
                    <div class="unit-body">
                        <div class="unit-metric">
                            <label>SCADA Availability</label>
                            <span>99.2%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-value" style="width: 99.2%; background-color: var(--kedco-secondary);"></div>
                        </div>
                        
                        <div class="unit-metric">
                            <label>Dispatch Response Time</label>
                            <span>Under 2min</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-value" style="width: 95%; background-color: var(--kedco-secondary);"></div>
                        </div>
                        
                        <div class="unit-metric">
                            <label>Energy Balance Accuracy</label>
                            <span>99.8%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-value" style="width: 99.8%; background-color: var(--kedco-secondary);"></div>
                        </div>
                    </div>
                </div>

                <!-- HSE Unit Card -->
                <div class="unit-card">
                    <div class="unit-header">
                        <i class="fas fa-hard-hat"></i>
                        <h3>Health, Safety & Environment</h3>
                    </div>
                    <div class="unit-body">
                        <div class="unit-metric">
                            <label>PTW Compliance Rate</label>
                            <span>96%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-value" style="width: 96%; background-color: var(--kedco-accent);"></div>
                        </div>
                        
                        <div class="unit-metric">
                            <label>Safety Audits Completed</label>
                            <span>28/32</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-value" style="width: 87%; background-color: var(--kedco-accent);"></div>
                        </div>
                        
                        <div class="unit-metric">
                            <label>Incident Response Time</label>
                            <span>Under 15min</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-value" style="width: 92%; background-color: var(--kedco-accent);"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Widgets -->
            <div class="widgets">
                <!-- Status Widget -->
                <div class="widget">
                    <div class="widget-header">
                        <h2><i class="fas fa-chart-bar"></i> Network Performance Metrics</h2>
                        <div class="widget-actions">
                            <button><i class="fas fa-sync-alt"></i></button>
                            <button><i class="fas fa-expand"></i></button>
                        </div>
                    </div>
                    <div class="widget-body">
                        <canvas id="statusChart" height="250"></canvas>
                    </div>
                </div>

                <!-- Outage Map Widget -->
                <div class="widget">
                    <div class="widget-header">
                        <h2><i class="fas fa-map-marked-alt"></i> Live Outage Map <span class="kedco-badge">KANO REGION</span></h2>
                        <div class="widget-actions">
                            <button><i class="fas fa-sync-alt"></i></button>
                            <button><i class="fas fa-expand"></i></button>
                        </div>
                    </div>
                    <div id="outageMap"></div>
                </div>
            </div>
        </div>

        <!-- O&M Unit View -->
        <div id="om-unit" class="unit-view">
            <div class="widget">
                <div class="widget-header">
                    <h2><i class="fas fa-bolt"></i> Operation & Maintenance Unit <span class="live-indicator"></span><span class="kedco-badge">LIVE</span></h2>
                    <div class="widget-actions">
                        <button><i class="fas fa-sync-alt"></i></button>
                        <button><i class="fas fa-expand"></i></button>
                    </div>
                </div>
                <div class="widget-body">
                    <div class="metrics" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); margin-bottom: 20px;">
                        <div class="metric-card" style="border-left-color: var(--kedco-primary);">
                            <div class="metric-icon" style="background: var(--kedco-primary);">
                                <i class="fas fa-exclamation-circle"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="om-active-faults">14</h3>
                                <p>Active Faults</p>
                            </div>
                        </div>
                        <div class="metric-card" style="border-left-color: var(--kedco-success);">
                            <div class="metric-icon" style="background: var(--kedco-success);">
                                <i class="fas fa-tools"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="om-maintenance">87%</h3>
                                <p>Preventive Maintenance</p>
                            </div>
                        </div>
                        <div class="metric-card" style="border-left-color: var(--kedco-warning);">
                            <div class="metric-icon" style="background: var(--kedco-warning);">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="om-response">22min</h3>
                                <p>Avg. Response Time</p>
                            </div>
                        </div>
                        <div class="metric-card" style="border-left-color: var(--kedco-secondary);">
                            <div class="metric-icon" style="background: var(--kedco-secondary);">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="om-resolution">94%</h3>
                                <p>Fault Resolution Rate</p>
                            </div>
                        </div>
                    </div>

                    <h3 style="margin: 20px 0 15px; color: var(--kedco-primary);">Live Team Activities</h3>
                    <table class="request-table">
                        <thead>
                            <tr>
                                <th>Team</th>
                                <th>Location</th>
                                <th>Activity</th>
                                <th>Start Time</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="om-activities">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>

                    <h3 style="margin: 25px 0 15px; color: var(--kedco-primary);">Recent Fault Reports</h3>
                    <table class="request-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Feeder</th>
                                <th>Fault Type</th>
                                <th>Reported</th>
                                <th>ETA</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="om-faults">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- PC&M Unit View -->
        <div id="pcm-unit" class="unit-view">
            <div class="widget">
                <div class="widget-header">
                    <h2><i class="fas fa-shield-alt"></i> Protection, Control & Metering Unit <span class="live-indicator"></span><span class="kedco-badge">LIVE</span></h2>
                    <div class="widget-actions">
                        <button><i class="fas fa-sync-alt"></i></button>
                        <button><i class="fas fa-expand"></i></button>
                    </div>
                </div>
                <div class="widget-body">
                    <div class="metrics" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); margin-bottom: 20px;">
                        <div class="metric-card" style="border-left-color: var(--kedco-primary);">
                            <div class="metric-icon" style="background: var(--kedco-primary);">
                                <i class="fas fa-tachometer-alt"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="pcm-meter-tests">128</h3>
                                <p>Meter Tests Today</p>
                            </div>
                        </div>
                        <div class="metric-card" style="border-left-color: var(--kedco-success);">
                            <div class="metric-icon" style="background: var(--kedco-success);">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="pcm-relay-tests">42</h3>
                                <p>Relay Tests Today</p>
                            </div>
                        </div>
                        <div class="metric-card" style="border-left-color: var(--kedco-warning);">
                            <div class="metric-icon" style="background: var(--kedco-warning);">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="pcm-accuracy">98.7%</h3>
                                <p>Metering Accuracy</p>
                            </div>
                        </div>
                        <div class="metric-card" style="border-left-color: var(--kedco-secondary);">
                            <div class="metric-icon" style="background: var(--kedco-secondary);">
                                <i class="fas fa-check-double"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="pcm-compliance">96%</h3>
                                <p>Regulatory Compliance</p>
                            </div>
                        </div>
                    </div>

                    <h3 style="margin: 20px 0 15px; color: var(--kedco-primary);">Transformer Test Results</h3>
                    <table class="request-table">
                        <thead>
                            <tr>
                                <th>Transformer ID</th>
                                <th>Test Type</th>
                                <th>Result</th>
                                <th>Test Date</th>
                                <th>Status</th>
                                <th>Technician</th>
                            </tr>
                        </thead>
                        <tbody id="pcm-transformer-tests">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>

                    <h3 style="margin: 25px 0 15px; color: var(--kedco-primary);">Meter Calibration Schedule</h3>
                    <table class="request-table">
                        <thead>
                            <tr>
                                <th>Meter ID</th>
                                <th>Location</th>
                                <th>Last Calibration</th>
                                <th>Next Due</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="pcm-meter-calibration">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Planning & Projects Unit View -->
        <div id="planning-unit" class="unit-view">
            <div class="widget">
                <div class="widget-header">
                    <h2><i class="fas fa-project-diagram"></i> Planning & Projects Unit <span class="live-indicator"></span><span class="kedco-badge">LIVE</span></h2>
                    <div class="widget-actions">
                        <button><i class="fas fa-sync-alt"></i></button>
                        <button><i class="fas fa-expand"></i></button>
                    </div>
                </div>
                <div class="widget-body">
                    <div class="metrics" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); margin-bottom: 20px;">
                        <div class="metric-card" style="border-left-color: var(--kedco-primary);">
                            <div class="metric-icon" style="background: var(--kedco-primary);">
                                <i class="fas fa-hard-hat"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="planning-active">12</h3>
                                <p>Active Projects</p>
                            </div>
                        </div>
                        <div class="metric-card" style="border-left-color: var(--kedco-success);">
                            <div class="metric-icon" style="background: var(--kedco-success);">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="planning-completed">78%</h3>
                                <p>Projects On Schedule</p>
                            </div>
                        </div>
                        <div class="metric-card" style="border-left-color: var(--kedco-warning);">
                            <div class="metric-icon" style="background: var(--kedco-warning);">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="planning-capacity">342 MVA</h3>
                                <p>Capacity Added YTD</p>
                            </div>
                        </div>
                        <div class="metric-card" style="border-left-color: var(--kedco-secondary);">
                            <div class="metric-icon" style="background: var(--kedco-secondary);">
                                <i class="fas fa-tachometer-alt"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="planning-budget">92%</h3>
                                <p>Budget Utilization</p>
                            </div>
                        </div>
                    </div>

                    <h3 style="margin: 20px 0 15px; color: var(--kedco-primary);">Transformer Commissioning Schedule</h3>
                    <table class="request-table">
                        <thead>
                            <tr>
                                <th>Transformer ID</th>
                                <th>Capacity</th>
                                <th>Location</th>
                                <th>Scheduled Date</th>
                                <th>Status</th>
                                <th>Team</th>
                            </tr>
                        </thead>
                        <tbody id="planning-commissioning">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>

                    <h3 style="margin: 25px 0 15px; color: var(--kedco-primary);">Active Projects</h3>
                    <table class="request-table">
                        <thead>
                            <tr>
                                <th>Project ID</th>
                                <th>Project Name</th>
                                <th>Start Date</th>
                                <th>End Date</th>
                                <th>Progress</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="planning-projects">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- HSE Unit View -->
        <div id="hse-unit" class="unit-view">
            <div class="widget">
                <div class="widget-header">
                    <h2><i class="fas fa-hard-hat"></i> Health, Safety & Environment Unit <span class="live-indicator"></span><span class="kedco-badge">LIVE</span></h2>
                    <div class="widget-actions">
                        <button><i class="fas fa-sync-alt"></i></button>
                        <button><i class="fas fa-expand"></i></button>
                    </div>
                </div>
                <div class="widget-body">
                    <div class="metrics" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); margin-bottom: 20px;">
                        <div class="metric-card" style="border-left-color: var(--kedco-primary);">
                            <div class="metric-icon" style="background: var(--kedco-primary);">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="hse-incidents">2</h3>
                                <p>Incidents This Month</p>
                            </div>
                        </div>
                        <div class="metric-card" style="border-left-color: var(--kedco-success);">
                            <div class="metric-icon" style="background: var(--kedco-success);">
                                <i class="fas fa-clipboard-check"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="hse-audits">96%</h3>
                                <p>Safety Compliance</p>
                            </div>
                        </div>
                        <div class="metric-card" style="border-left-color: var(--kedco-warning);">
                            <div class="metric-icon" style="background: var(--kedco-warning);">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="hse-response">8min</h3>
                                <p>Avg. Response Time</p>
                            </div>
                        </div>
                        <div class="metric-card" style="border-left-color: var(--kedco-secondary);">
                            <div class="metric-icon" style="background: var(--kedco-secondary);">
                                <i class="fas fa-recycle"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="hse-environment">100%</h3>
                                <p>Environmental Compliance</p>
                            </div>
                        </div>
                    </div>

                    <h3 style="margin: 20px 0 15px; color: var(--kedco-primary);">Incident Reporting</h3>
                    <table class="request-table">
                        <thead>
                            <tr>
                                <th>Incident ID</th>
                                <th>Type</th>
                                <th>Location</th>
                                <th>Reported</th>
                                <th>Severity</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="hse-incidents-list">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>

                    <h3 style="margin: 25px 0 15px; color: var(--kedco-primary);">Low Safety Material Inventory</h3>
                    <table class="request-table">
                        <thead>
                            <tr>
                                <th>Material</th>
                                <th>Category</th>
                                <th>Current Stock</th>
                                <th>Minimum Required</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="hse-inventory">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- System Operation View -->
        <div id="system-unit" class="unit-view">
            <div class="widget">
                <div class="widget-header">
                    <h2><i class="fas fa-network-wired"></i> System Operation / Dispatch <span class="live-indicator"></span><span class="kedco-badge">LIVE</span></h2>
                    <div class="widget-actions">
                        <button><i class="fas fa-sync-alt"></i></button>
                        <button><i class="fas fa-expand"></i></button>
                    </div>
                </div>
                <div class="widget-body">
                    <div class="metrics" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); margin-bottom: 20px;">
                        <div class="metric-card" style="border-left-color: var(--kedco-primary);">
                            <div class="metric-icon" style="background: var(--kedco-primary);">
                                <i class="fas fa-plug"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="system-load">642 MW</h3>
                                <p>Current System Load</p>
                            </div>
                        </div>
                        <div class="metric-card" style="border-left-color: var(--kedco-success);">
                            <div class="metric-icon" style="background: var(--kedco-success);">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="system-frequency">49.8 Hz</h3>
                                <p>System Frequency</p>
                            </div>
                        </div>
                        <div class="metric-card" style="border-left-color: var(--kedco-warning);">
                            <div class="metric-icon" style="background: var(--kedco-warning);">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="system-outages">3</h3>
                                <p>Active Outages</p>
                            </div>
                        </div>
                        <div class="metric-card" style="border-left-color: var(--kedco-secondary);">
                            <div class="metric-icon" style="background: var(--kedco-secondary);">
                                <i class="fas fa-exchange-alt"></i>
                            </div>
                            <div class="metric-info">
                                <h3 id="system-restored">87%</h3>
                                <p>Load Restored</p>
                            </div>
                        </div>
                    </div>

                    <h3 style="margin: 20px 0 15px; color: var(--kedco-primary);">Live Outage Information</h3>
                    <table class="request-table">
                        <thead>
                            <tr>
                                <th>Outage ID</th>
                                <th>Feeder</th>
                                <th>Area Affected</th>
                                <th>Customers</th>
                                <th>Start Time</th>
                                <th>ETA Restoration</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="system-outages-list">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>

                    <h3 style="margin: 25px 0 15px; color: var(--kedco-primary);">Dispatch Activities</h3>
                    <table class="request-table">
                        <thead>
                            <tr>
                                <th>Team</th>
                                <th>Assignment</th>
                                <th>Location</th>
                                <th>Dispatched</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="system-dispatch">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Alert Toast (initially hidden) -->
        <div class="alert-toast" id="outageAlert" style="display: none;">
            <i class="fas fa-bell"></i>
            <div class="content">
                <h4>New Outage Reported</h4>
                <p>FEEDER_11KV_402 in Tarauni experiencing partial outage. 124 customers affected.</p>
            </div>
            <button class="close">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </main>

    <script>
        // Toggle sidebar on mobile
        document.getElementById('menuToggle').addEventListener('click', function() {
            document.querySelector('.sidebar').classList.toggle('active');
        });

        // Close alert banner
        document.querySelector('.alert-banner .close').addEventListener('click', function() {
            document.querySelector('.alert-banner').style.display = 'none';
        });

        // Close toast alert
        document.querySelector('.alert-toast .close').addEventListener('click', function() {
            document.getElementById('outageAlert').style.display = 'none';
        });

        // Initialize outage map
        const outageMap = L.map('outageMap').setView([12.002, 8.592], 11);
        
        // Add tile layer (OpenStreetMap)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(outageMap);

        // Add some sample outage markers
        const outages = [
            { lat: 12.002, lng: 8.592, title: 'FEEDER_11KV_402', area: 'Tarauni', customers: 124 },
            { lat: 11.996, lng: 8.531, title: 'FEEDER_33KV_112', area: 'Nassarawa', customers: 87 },
            { lat: 12.012, lng: 8.521, title: 'TX_500KVA_78', area: 'Gwale', customers: 42 },
            { lat: 11.982, lng: 8.603, title: 'FEEDER_11KV_315', area: 'Dala', customers: 206 }
        ];

        outages.forEach(outage => {
            L.circleMarker([outage.lat, outage.lng], {
                color: '#e74c3c',
                weight: 1,
                fillColor: '#e74c3c',
                fillOpacity: 0.7,
                radius: 8
            }).addTo(outageMap).bindPopup(`
                <strong>${outage.title}</strong><br>
                Area: ${outage.area}<br>
                Affected Customers: ${outage.customers}<br>
                <button style="margin-top: 8px; padding: 5px 10px; background: #0055A5; color: white; border: none; border-radius: 4px; cursor: pointer;">
                    View Details
                </button>
            `);
        });

        // Sample data for O&M activities
        const omActivities = [
            { team: 'Team Alpha', location: 'Tarauni FEEDER_11KV_402', activity: 'Fault Repair', startTime: '08:45', status: 'IN PROGRESS' },
            { team: 'Team Beta', location: 'Nassarawa FEEDER_33KV_112', activity: 'Routine Maintenance', startTime: '09:30', status: 'COMPLETED' },
            { team: 'Team Gamma', location: 'Gwale TX_500KVA_78', activity: 'Transformer Inspection', startTime: '10:15', status: 'EN ROUTE' },
            { team: 'Team Delta', location: 'Dala FEEDER_11KV_315', activity: 'Pole Replacement', startTime: '11:20', status: 'IN PROGRESS' }
        ];

        const omFaults = [
            { id: 'FLT-2023-087', feeder: 'FEEDER_11KV_402', faultType: 'Phase Fault', reported: '08:30', eta: '12:00', status: 'IN PROGRESS' },
            { id: 'FLT-2023-088', feeder: 'FEEDER_33KV_112', faultType: 'Transformer Overload', reported: '09:15', eta: '11:45', status: 'RESOLVED' },
            { id: 'FLT-2023-089', feeder: 'FEEDER_11KV_315', faultType: 'Line Break', reported: '10:05', eta: '13:30', status: 'ASSIGNED' }
        ];

        // Sample data for PC&M Unit
        const pcmTransformerTests = [
            { id: 'TX-1001', testType: 'Insulation Resistance', result: 'Pass', testDate: '2023-10-15', status: 'COMPLETED', technician: 'Engr. Musa' },
            { id: 'TX-2005', testType: 'Turns Ratio', result: 'Pass', testDate: '2023-10-15', status: 'COMPLETED', technician: 'Engr. Aisha' },
            { id: 'TX-3002', testType: 'Winding Resistance', result: 'Fail', testDate: '2023-10-15', status: 'UNDER REVIEW', technician: 'Engr. Hassan' },
            { id: 'TX-4008', testType: 'Dielectric Strength', result: 'Pass', testDate: '2023-10-15', status: 'COMPLETED', technician: 'Engr. Fatima' }
        ];

        const pcmMeterCalibration = [
            { id: 'MTR-04587', location: 'Tarauni Market', lastCalibration: '2023-04-15', nextDue: '2023-10-15', status: 'DUE' },
            { id: 'MTR-09812', location: 'Nassarawa PHCN', lastCalibration: '2023-07-22', nextDue: '2024-01-22', status: 'OK' },
            { id: 'MTR-13456', location: 'Gwale Layout', lastCalibration: '2023-01-30', nextDue: '2023-07-30', status: 'OVERDUE' },
            { id: 'MTR-16789', location: 'Dala Industrial', lastCalibration: '2023-08-10', nextDue: '2024-02-10', status: 'OK' }
        ];

        // Sample data for Planning & Projects Unit
        const planningCommissioning = [
            { id: 'TX-5001', capacity: '5 MVA', location: 'Tarauni Grid', scheduledDate: '2023-10-20', status: 'SCHEDULED', team: 'Team Alpha' },
            { id: 'TX-5002', capacity: '7.5 MVA', location: 'Nassarawa PHCN', scheduledDate: '2023-10-22', status: 'IN PROGRESS', team: 'Team Beta' },
            { id: 'TX-5003', capacity: '10 MVA', location: 'Gwale Layout', scheduledDate: '2023-10-25', status: 'PENDING', team: 'Team Gamma' },
            { id: 'TX-5004', capacity: '15 MVA', location: 'Dala Industrial', scheduledDate: '2023-10-18', status: 'COMPLETED', team: 'Team Delta' }
        ];

        const planningProjects = [
            { id: 'PRJ-2023-101', name: 'Tarauni Grid Expansion', startDate: '2023-06-15', endDate: '2023-12-15', progress: '65%', status: 'ON SCHEDULE' },
            { id: 'PRJ-2023-102', name: 'Nassarawa Feeder Upgrade', startDate: '2023-08-01', endDate: '2023-11-30', progress: '80%', status: 'ON SCHEDULE' },
            { id: 'PRJ-2023-103', name: 'Gwale Load Balancing', startDate: '2023-09-10', endDate: '2024-01-20', progress: '30%', status: 'DELAYED' },
            { id: 'PRJ-2023-104', name: 'Dala Industrial Supply', startDate: '2023-07-01', endDate: '2023-10-31', progress: '95%', status: 'NEAR COMPLETION' }
        ];

        // Sample data for HSE Unit
        const hseIncidents = [
            { id: 'INC-2023-045', type: 'Minor Injury', location: 'Tarauni Substation', reported: '2023-10-12 09:30', severity: 'LOW', status: 'RESOLVED' },
            { id: 'INC-2023-046', type: 'Equipment Damage', location: 'Nassarawa Feeder', reported: '2023-10-14 14:15', severity: 'MEDIUM', status: 'UNDER INVESTIGATION' },
            { id: 'INC-2023-047', type: 'Near Miss', location: 'Gwale Layout', reported: '2023-10-15 11:20', severity: 'LOW', status: 'RESOLVED' }
        ];

        const hseInventory = [
            { material: 'Safety Helmets', category: 'PPE', currentStock: 45, minimumRequired: 50, status: 'LOW', action: 'ORDER' },
            { material: 'Insulating Gloves', category: 'PPE', currentStock: 20, minimumRequired: 25, status: 'LOW', action: 'ORDER' },
            { material: 'Fire Extinguishers', category: 'Safety Equipment', currentStock: 35, minimumRequired: 30, status: 'OK', action: 'MONITOR' },
            { material: 'First Aid Kits', category: 'Medical', currentStock: 28, minimumRequired: 25, status: 'OK', action: 'MONITOR' },
            { material: 'Safety Harnesses', category: 'PPE', currentStock: 15, minimumRequired: 20, status: 'LOW', action: 'ORDER' }
        ];

        // Sample data for System Operation Unit
        const systemOutagesList = [
            { id: 'OUT-2023-1023', feeder: 'FEEDER_11KV_402', area: 'Tarauni', customers: 124, startTime: '08:30', eta: '12:00', status: 'UNDER REPAIR' },
            { id: 'OUT-2023-1024', feeder: 'FEEDER_33KV_112', area: 'Nassarawa', customers: 87, startTime: '09:15', eta: '11:45', status: 'RESTORED' },
            { id: 'OUT-2023-1025', feeder: 'FEEDER_11KV_315', area: 'Dala', customers: 206, startTime: '10:05', eta: '13:30', status: 'DISPATCHED' }
        ];

        const systemDispatch = [
            { team: 'Team Alpha', assignment: 'Fault Repair', location: 'Tarauni FEEDER_11KV_402', dispatched: '08:45', status: 'ON SITE' },
            { team: 'Team Beta', assignment: 'Load Balancing', location: 'Nassarawa Grid Station', dispatched: '09:30', status: 'COMPLETED' },
            { team: 'Team Gamma', assignment: 'Line Inspection', location: 'Gwale Layout', dispatched: '10:15', status: 'EN ROUTE' }
        ];

        // Function to render requests tables
        function renderRequestsTable(data, containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            data.forEach(item => {
                const row = document.createElement('tr');
                
                // Determine status class
                let statusClass = '';
                if (item.status === 'PENDING') statusClass = 'status-pending';
                else if (item.status === 'APPROVED') statusClass = 'status-approved';
                else if (item.status === 'REJECTED') statusClass = 'status-rejected';
                else if (item.status === 'IN PROGRESS') statusClass = 'status-in-progress';
                else if (item.status === 'COMPLETED') statusClass = 'status-completed';
                else if (item.status === 'UNDER REPAIR') statusClass = 'status-in-progress';
                else if (item.status === 'RESTORED') statusClass = 'status-completed';
                else if (item.status === 'DISPATCHED') statusClass = 'status-pending';
                else if (item.status === 'ON SITE') statusClass = 'status-in-progress';
                else if (item.status === 'EN ROUTE') statusClass = 'status-pending';
                else if (item.status === 'DUE') statusClass = 'status-pending';
                else if (item.status === 'OVERDUE') statusClass = 'status-rejected';
                else if (item.status === 'OK') statusClass = 'status-completed';
                else if (item.status === 'UNDER REVIEW') statusClass = 'status-in-progress';
                else if (item.status === 'ASSIGNED') statusClass = 'status-pending';
                else if (item.status === 'RESOLVED') statusClass = 'status-completed';
                else if (item.status === 'FAIL') statusClass = 'status-rejected';
                else if (item.status === 'PASS') statusClass = 'status-completed';
                else if (item.status === 'SCHEDULED') statusClass = 'status-pending';
                else if (item.status === 'ON SCHEDULE') statusClass = 'status-completed';
                else if (item.status === 'DELAYED') statusClass = 'status-rejected';
                else if (item.status === 'NEAR COMPLETION') statusClass = 'status-in-progress';
                else if (item.status === 'LOW') statusClass = 'status-rejected';
                else if (item.status === 'UNDER INVESTIGATION') statusClass = 'status-in-progress';
                
                // Create row content based on container type
                if (containerId === 'om-activities') {
                    row.innerHTML = `
                        <td>${item.team}</td>
                        <td>${item.location}</td>
                        <td>${item.activity}</td>
                        <td>${item.startTime}</td>
                        <td><span class="status-badge ${statusClass}">${item.status}</span></td>
                    `;
                } else if (containerId === 'om-faults') {
                    row.innerHTML = `
                        <td>${item.id}</td>
                        <td>${item.feeder}</td>
                        <td>${item.faultType}</td>
                        <td>${item.reported}</td>
                        <td>${item.eta}</td>
                        <td><span class="status-badge ${statusClass}">${item.status}</span></td>
                    `;
                } else if (containerId === 'pcm-transformer-tests') {
                    row.innerHTML = `
                        <td>${item.id}</td>
                        <td>${item.testType}</td>
                        <td>${item.result}</td>
                        <td>${item.testDate}</td>
                        <td><span class="status-badge ${statusClass}">${item.status}</span></td>
                        <td>${item.technician}</td>
                    `;
                } else if (containerId === 'pcm-meter-calibration') {
                    row.innerHTML = `
                        <td>${item.id}</td>
                        <td>${item.location}</td>
                        <td>${item.lastCalibration}</td>
                        <td>${item.nextDue}</td>
                        <td><span class="status-badge ${statusClass}">${item.status}</span></td>
                    `;
                } else if (containerId === 'planning-commissioning') {
                    row.innerHTML = `
                        <td>${item.id}</td>
                        <td>${item.capacity}</td>
                        <td>${item.location}</td>
                        <td>${item.scheduledDate}</td>
                        <td><span class="status-badge ${statusClass}">${item.status}</span></td>
                        <td>${item.team}</td>
                    `;
                } else if (containerId === 'planning-projects') {
                    row.innerHTML = `
                        <td>${item.id}</td>
                        <td>${item.name}</td>
                        <td>${item.startDate}</td>
                        <td>${item.endDate}</td>
                        <td>${item.progress}</td>
                        <td><span class="status-badge ${statusClass}">${item.status}</span></td>
                    `;
                } else if (containerId === 'hse-incidents-list') {
                    row.innerHTML = `
                        <td>${item.id}</td>
                        <td>${item.type}</td>
                        <td>${item.location}</td>
                        <td>${item.reported}</td>
                        <td>${item.severity}</td>
                        <td><span class="status-badge ${statusClass}">${item.status}</span></td>
                    `;
                } else if (containerId === 'hse-inventory') {
                    row.innerHTML = `
                        <td>${item.material}</td>
                        <td>${item.category}</td>
                        <td>${item.currentStock}</td>
                        <td>${item.minimumRequired}</td>
                        <td><span class="status-badge ${statusClass}">${item.status}</span></td>
                        <td>${item.action}</td>
                    `;
                } else if (containerId === 'system-outages-list') {
                    row.innerHTML = `
                        <td>${item.id}</td>
                        <td>${item.feeder}</td>
                        <td>${item.area}</td>
                        <td>${item.customers}</td>
                        <td>${item.startTime}</td>
                        <td>${item.eta}</td>
                        <td><span class="status-badge ${statusClass}">${item.status}</span></td>
                    `;
                } else if (containerId === 'system-dispatch') {
                    row.innerHTML = `
                        <td>${item.team}</td>
                        <td>${item.assignment}</td>
                        <td>${item.location}</td>
                        <td>${item.dispatched}</td>
                        <td><span class="status-badge ${statusClass}">${item.status}</span></td>
                    `;
                }
                
                container.appendChild(row);
            });
        }

        // Initialize charts
        document.addEventListener('DOMContentLoaded', function() {
            // Status Chart
            const statusCtx = document.getElementById('statusChart').getContext('2d');
            const statusChart = new Chart(statusCtx, {
                type: 'bar',
                data: {
                    labels: ['O&M', 'PC&M', 'Planning', 'HSE', 'System Op'],
                    datasets: [{
                        label: 'Performance Score (%)',
                        data: [92, 96, 88, 95, 99],
                        backgroundColor: [
                            '#0055A5',
                            '#00A651',
                            '#FFC72C',
                            '#F39C12',
                            '#9B59B6'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    }
                }
            });

            // Render the requests tables
            renderRequestsTable(omActivities, 'om-activities');
            renderRequestsTable(omFaults, 'om-faults');
            renderRequestsTable(pcmTransformerTests, 'pcm-transformer-tests');
            renderRequestsTable(pcmMeterCalibration, 'pcm-meter-calibration');
            renderRequestsTable(planningCommissioning, 'planning-commissioning');
            renderRequestsTable(planningProjects, 'planning-projects');
            renderRequestsTable(hseIncidents, 'hse-incidents-list');
            renderRequestsTable(hseInventory, 'hse-inventory');
            renderRequestsTable(systemOutagesList, 'system-outages-list');
            renderRequestsTable(systemDispatch, 'system-dispatch');

            // Setup navigation
            setupNavigation();

            // Simulate real-time updates
            setInterval(() => {
                // Randomly update metrics for demo purposes
                document.querySelectorAll('.metric-info h3').forEach(metric => {
                    if (metric.textContent.includes('%')) {
                        const currentValue = parseFloat(metric.textContent);
                        const newValue = Math.min(100, (currentValue + (Math.random() * 2 - 1))).toFixed(1);
                        metric.textContent = newValue + '%';
                    } else if (metric.textContent.includes('MW')) {
                        const currentValue = parseFloat(metric.textContent);
                        const newValue = Math.max(600, Math.min(700, (currentValue + (Math.random() * 10 - 5)))).toFixed(0);
                        metric.textContent = newValue + ' MW';
                    } else if (metric.textContent.includes('Hz')) {
                        const currentValue = parseFloat(metric.textContent);
                        const newValue = Math.max(49.5, Math.min(50.2, (currentValue + (Math.random() * 0.2 - 0.1)))).toFixed(1);
                        metric.textContent = newValue + ' Hz';
                    } else if (metric.textContent.includes('min')) {
                        const currentValue = parseFloat(metric.textContent);
                        const newValue = Math.max(15, Math.min(30, (currentValue + (Math.random() * 5 - 2.5)))).toFixed(0);
                        metric.textContent = newValue + 'min';
                    } else if (metric.textContent.includes('MVA')) {
                        const currentValue = parseFloat(metric.textContent);
                        const newValue = Math.max(300, Math.min(400, (currentValue + (Math.random() * 10 - 5)))).toFixed(0);
                        metric.textContent = newValue + ' MVA';
                    } else {
                        const currentValue = parseFloat(metric.textContent);
                        const newValue = Math.max(0, currentValue + (Math.random() * 0.4 - 0.2)).toFixed(1);
                        metric.textContent = newValue;
                    }
                });

                // Randomly show outage alert
                if (Math.random() > 0.7) {
                    document.getElementById('outageAlert').style.display = 'flex';
                    setTimeout(() => {
                        document.getElementById('outageAlert').style.display = 'none';
                    }, 5000);
                }
            }, 5000);
        });

        // Setup navigation between views
        function setupNavigation() {
            const navLinks = document.querySelectorAll('.sidebar-menu a');
            const views = document.querySelectorAll('.unit-view');
            const pageTitle = document.getElementById('page-title');
            const pageDescription = document.getElementById('page-description');
            
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remove active class from all links
                    navLinks.forEach(l => l.classList.remove('active'));
                    // Add active class to clicked link
                    this.classList.add('active');
                    
                    // Get the view to show
                    const viewId = this.getAttribute('data-view');
                    
                    // Hide all views
                    views.forEach(view => view.classList.remove('active'));
                    
                    // Show the selected view
                    document.getElementById(viewId).classList.add('active');
                    
                    // Update page title and description
                    updatePageTitle(viewId);
                });
            });
        }

            // Logout function
function logout() {
  // Optional: Show confirmation
  const confirmed = confirm("Are you sure you want to log out?");
  if (!confirmed) return;

  // Optional: Clear any session data (if you're using localStorage, etc.)
  // localStorage.clear();
  // sessionStorage.clear();

  // Redirect to login/home page
  window.location.href = "index.html";
}
        // Update page title based on selected view
        function updatePageTitle(viewId) {
            const titleElement = document.getElementById('page-title');
            const descriptionElement = document.getElementById('page-description');
            
            switch(viewId) {
                case 'overview':
                    titleElement.textContent = 'Technical Operations Dashboard';
                    descriptionElement.textContent = 'Real-time monitoring of Kano Electricity Distribution Company network performance';
                    break;
                case 'om-unit':
                    titleElement.textContent = 'O&M Unit Dashboard';
                    descriptionElement.textContent = 'Live monitoring of Operation & Maintenance activities across the network';
                    break;
                case 'pcm-unit':
                    titleElement.textContent = 'PC&M Unit Dashboard';
                    descriptionElement.textContent = 'Protection, Control & Metering unit performance and testing activities';
                    break;
                case 'planning-unit':
                    titleElement.textContent = 'Planning & Projects Dashboard';
                    descriptionElement.textContent = 'Network expansion projects and capacity planning activities';
                    break;
                case 'hse-unit':
                    titleElement.textContent = 'HSE Unit Dashboard';
                    descriptionElement.textContent = 'Health, Safety and Environment compliance and incident reporting';
                    break;
                case 'system-unit':
                    titleElement.textContent = 'System Operation Dashboard';
                    descriptionElement.textContent = 'Real-time system monitoring, outage management and dispatch operations';
                    break;
                case 'analytics':
                    titleElement.textContent = 'Performance Analytics';
                    descriptionElement.textContent = 'Detailed analytics and performance metrics across all technical units';
                    break;
                case 'outage-map':
                    titleElement.textContent = 'Live Outage Map';
                    descriptionElement.textContent = 'Geospatial visualization of network outages and restoration progress';
                    break;
                case 'settings':
                    titleElement.textContent = 'System Settings';
                    descriptionElement.textContent = 'Dashboard configuration and user preferences';
                    break;
            }
        }
    </script>
</body>
</html>